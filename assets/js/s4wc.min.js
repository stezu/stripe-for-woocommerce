Stripe.setPublishableKey(s4wc_info.publishableKey),jQuery(function($){function e(){o=$("#s4wc-creditcard-form"),s4wc_info.hasCard&&s4wc_info.savedCardsEnabled&&o.hide(),s.on("change",'input[name="s4wc_card"]',function(){"new"===$('input[name="s4wc_card"]:checked').val()?o.slideDown(200):o.slideUp(200)}),$(".s4wc-card-number").payment("formatCardNumber").after('<span class="s4wc-card-image"></span>'),$(".s4wc-card-expiry").payment("formatCardExpiry"),$(".s4wc-card-cvc").payment("formatCardCVC").focus(function(){$(".s4wc-card-number").addClass("cvc")}).blur(function(){$(".s4wc-card-number").removeClass("cvc")})}function r(){if($("#payment_method_s4wc").is(":checked")&&(!$('input[name="s4wc_card"]').length||"new"===$('input[name="s4wc_card"]:checked').val())&&!$("input.stripe_token").length){var e=$(".s4wc-card-expiry").payment("cardExpiryVal"),r=s4wc_info.billing_first_name||s4wc_info.billing_last_name?s4wc_info.billing_first_name+" "+s4wc_info.billing_last_name:$("#billing_first_name").val()+" "+$("#billing_last_name").val(),c={number:$(".s4wc-card-number").val()||"",cvc:$(".s4wc-card-cvc").val()||"",exp_month:e.month||"",exp_year:e.year||"",name:$(".s4wc-billing-name").val()||r,address_line1:s4wc_info.billing_address_1||$("#billing_address_1").val()||"",address_line2:s4wc_info.billing_address_2||$("#billing_address_2").val()||"",address_city:s4wc_info.billing_city||$("#billing_city").val()||"",address_state:s4wc_info.billing_state||$("#billing_state").val()||"",address_zip:s4wc_info.billing_postcode||$(".s4wc-billing-zip").val()||$("#billing_postcode").val()||"",address_country:s4wc_info.billing_country||$("#billing_country").val()||""};return s.block({message:null,overlayCSS:{background:"#fff url("+woocommerce_params.ajax_loader_url+") no-repeat center",opacity:.6}}),a(c)?(Stripe.createToken(c,n),!1):!0}return!0}function n(e,r){r.error?($(".payment-errors, .stripe_token, .form_errors").remove(),o.before('<span class="payment-errors required">'+r.error.message+"</span>"),s.unblock()):(s.append('<input type="hidden" class="stripe_token" name="stripe_token" value="'+r.id+'"/>'),s.submit())}function a(e){var r=c(e);if(r.errors.length){$(".stripe_token, .form_errors").remove();for(var n=0,a=r.errors.length;a>n;n++){var i=r.errors[n].field,o=r.errors[n].type;s.append('<input type="hidden" class="form_errors" name="'+i+'" value="'+o+'">')}return s.append('<input type="hidden" class="form_errors" name="form_errors" value="1">'),s.unblock(),!1}return s.find(".woocommerce-error").remove(),!0}function c(e){var r={errors:[]};return e.number?$.payment.validateCardNumber(e.number)||r.errors.push({field:"s4wc-card-number",type:"invalid"}):r.errors.push({field:"s4wc-card-number",type:"undefined"}),e.exp_month&&e.exp_year?$.payment.validateCardExpiry(e.exp_month,e.exp_year)||r.errors.push({field:"s4wc-card-expiry",type:"invalid"}):r.errors.push({field:"s4wc-card-expiry",type:"undefined"}),e.cvc?$.payment.validateCardCVC(e.cvc,$.payment.cardType(e.number))||r.errors.push({field:"s4wc-card-cvc",type:"invalid"}):r.errors.push({field:"s4wc-card-cvc",type:"undefined"}),r}var i=$("body"),s=$("form.checkout, form#order_review"),o;s.attr("novalidate","novalidate"),$(window).on("load.s4wc",function(){e()}),i.on("updated_checkout.s4wc",function(){e()}),$("form.checkout").on("checkout_place_order_s4wc",function(){return r()}),$("form#order_review").on("submit",function(){return r()}),s.on("keyup change",'#card-number, #card-expiry, #card-cvc, input[name="s4wc_card"], input[name="payment_method"]',function(){$(".woocommerce_error, .woocommerce-error, .woocommerce-message, .woocommerce_message, .stripe_token, .form_errors").remove()})});
//# sourceMappingURL=./s4wc.min.map